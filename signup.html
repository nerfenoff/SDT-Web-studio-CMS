<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="style/signupcss.css">
</head>
<body>
<div class='login'>
    <h2>Register</h2>
    <input id = 'username' name='username' placeholder='Username' type='text'>
    <input id='password' name='password' placeholder='Password' type='password'>
    <input id = 'email' name='email' placeholder='E-Mail Address' type='text'>
    <div id = "ddd" class='agree'>
        <input id='agree' name='agree' type='checkbox'>
        <label for='agree'></label>Accept rules and conditions
    </div>
    <input id = "submitt" class='animated' type='submit' value='Register'>
    <a class='forgot' href='#'>Already have an account?</a>
    <div id = 'Errors'></div>
</div>

<script type="text/javascript">
    document.getElementById("submitt").addEventListener('click',check);
  function check(){
    alert(123);
    var username = document.getElementById("username");
    var email = document.getElementById("email");
    var password = document.getElementById("password");
    var errorString = "";
    if(username.value == "")
      errorString += '<p>введите имя пользователя</p>';

    if(email.value == "")
      errorString += '<p>введите Email</p>';

    if(password.value.length < 8)
      errorString += '<p>размер пароля должен быть не менее 8 символов</p>';

    if(errorString == ""){
      document.getElementById("Errors").innerHTML = "send";

      var postReq = new XMLHttpRequest(); 
      postReq.open('POST','/registrationNewUser',false); 
      postReq.setRequestHeader('Content-Type', 'application/json'); 

      postReq.onload = function() {
        alert(location.origin);
        if(this.responseText == 'next')
          window.location = location.origin + '/UserPage';
        else
          document.getElementById('Errors').innerHTML = this.responseText; 
      }; 

      var j = {
          username: username.value,
          email: email.value,
          password: password.value
        }; 
        var temp = JSON.stringify(j);

    postReq.send(JSON.stringify(j)); 

    }
    else
      document.getElementById("Errors").innerHTML = errorString;
  }


</script>
</body>
</html>